<!DOCTYPE html>
<html dir="rtl" lang="fa">
    <head>
        <title>Quora</title>

        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
{#        <link rel="icon" type="image/png" href="http://www.yogihosting.com/wp-content/themes/yogi-yogihosting/Images/favicon.ico" />#}
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        {% load static %}
        {% load notifications_tags %}
            <script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>

        {% register_notify_callbacks callbacks='fill_notification_list,fill_notification_badge'  menu_class="dropdown-menux"  refresh_period=30%}

        <link rel="stylesheet" type="text/css" href="{% static "css/bootstrap.css" %}"/>
        <link rel="stylesheet" type="text/css" href="{% static "css/base.css" %}"/>
        <link rel="stylesheet" type="text/css" href="{% static "css/layout.css" %}"/>
        <link rel="stylesheet" type="text/css" href="{% static "css/home.css" %}"/>

        <script src="//cdn.ckeditor.com/4.4.7/full-all/ckeditor.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <script src="{% static "js/bootstrap.js" %}"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>

        {% block special_static %}
        {% endblock special_static %}

    </head>

    <body>
    {% if user.is_authenticated %}
    {% live_notify_list  list_class="dropdown-menu" %}
        <div class="overlay">
        <nav class="navbar navbar-expand-md justify-content-between">
            <a class="navbar-brand" href="#"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav ml-md-auto">
                    <li class="nav-item selected">
                        <div class="nav-icon">
                            <svg width="50px" height="50px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <g id="Icons" class="site_nav_icon-fill" stroke="none" fill="#555" fill-rule="evenodd">
                                <path d="M4,7.99448227 C4,5.23610588 6.24325385,3 9.00365614,3 L46,3 L46,42.1055177 C46,44.8638941 43.7567461,47.1 40.9963439,47.1 L4,47.1 L4,7.99448227 M11,12 L25,12 L25,14 L11,14 M11,20 L25,20 L25,22 L11,22 M11,28 L39,28 L39,30 L11,30 M11,36 L39,36 L39,38 L11,38 M29,12 L39,12 L39,22 L29,22 Z"></path>
                            </g>
                            </svg>
                        </div>
                        <a class="nav-link" href="#">خانه</a>
                    </li>
                    <li class="nav-item">
                        <div class="nav-icon">
                            <svg width="50px" height="50px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <g id="answer" class="site_nav_icon-fill" stroke="none" stroke-width="1" fill="#555" fill-rule="evenodd">
                                    <path d="M25,24.907293 L25,45.3 C25,45.5761424 24.7761424,45.8 24.5,45.8 L23.42,45.8 C23.1438576,45.8 22.92,45.5761424 22.92,45.3 L22.92,45.3 L22.92,24.907293 L25,24.907293 Z M23.96,22.92 L44.2873495,22.92 C44.5634919,22.92 44.7873495,23.1438576 44.7873495,23.42 L44.7873495,23.42 L44.7873495,24.407293 C44.7873495,24.6834354 44.5634919,24.907293 44.2873495,24.907293 L23.96,24.907293 L22.92,24.907293 L22.92,23.96 C22.92,23.3856239 23.3856239,22.92 23.96,22.92 Z" id="Combined-Shape" transform="translate(33.853675, 34.360000) rotate(-180.000000) translate(-33.853675, -34.360000) "></path>
                                    <path d="M7.32,6.187293 L7.32,26.58 C7.32,26.8561424 7.09614237,27.08 6.82,27.08 L5.74,27.08 C5.46385763,27.08 5.24,26.8561424 5.24,26.58 L5.24,26.58 L5.24,6.187293 L7.32,6.187293 Z M6.28,4.2 L26.6073495,4.2 C26.8834919,4.2 27.1073495,4.42385763 27.1073495,4.7 L27.1073495,4.7 L27.1073495,5.687293 C27.1073495,5.96343537 26.8834919,6.187293 26.6073495,6.187293 L6.28,6.187293 L5.24,6.187293 L5.24,5.24 C5.24,4.66562386 5.70562386,4.2 6.28,4.2 Z"></path>
                                    <g id="FILLED-PENCIL" transform="translate(23.869499, 26.014975) rotate(-315.000000) translate(-23.869499, -26.014975) translate(18.369499, -2.985025)">
                                        <path d="M4.05262878,56.4260093 L0,47.1640748 L10.4,47.1640748 L6.34737122,56.4260093 C6.07010171,57.059685 5.33163476,57.3486092 4.69795913,57.0713397 C4.40933948,56.945052 4.17891647,56.714629 4.05262878,56.4260093 Z M5.00959999,-1.59773453e-15 L5.2,-1.59773453e-15 L5.2,-1.77635684e-15 C8.0718807,-2.30392962e-15 10.4,2.3281193 10.4,5.2 L10.4,47.1640748 L5.2,47.1640748 L-5.42101086e-20,47.1640748 L-5.42101086e-20,5.00959999 L-8.8817842e-16,5.00959999 C-1.2269916e-15,2.24287431 2.24287431,-3.04449391e-15 5.00959999,-3.55271368e-15 L5.00959999,-1.59773453e-15 M1.04 49.92 9.36 49.92 9.36 50.923491 6.50507812 50.923491 1.04 50.923491 Z"></path>
                    <!--polygon id="Rectangle-7" fill="blue" points="1.04 49.92 9.36 49.92 9.36 50.923491 6.50507812 50.923491 1.04 50.923491"></polygon-->
                                    </g>
                                </g>
                            </svg>
                        </div>
                        <a class="nav-link" href="#">جواب بده</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                        اطلاع‌ها{% live_notify_badge %}
                                <span class="glyphicon glyphicon-user pull-right"></span>
                        </a>
                        <ul class="dropdown-menu dropdown-menux"></ul>
                    </li>
                </ul>
                <div class="right-nav-item dropdown ">
                    <a class="nav-link dropdown-toggle photo_wrapper" href="#" id="navbardrop" data-toggle="dropdown">
                        <span class="photo_tooltip IdentityPhoto HoverMenu Photo" id="__w2_OPQGbZo_link">
                            <img class="profile_photo_img" src="https://qsf.fs.quoracdn.net/-3-images.new_grid.profile_pic_default_small.png-26-679bc670f786484c.png" alt="MahdiehBrf" height="50" width="50">
                        </span>
                    </a>
                    <ul class="dropdown-menu profile-menu">
                        <li class="dropdown-item" >{{ user}} خوش آمدید </li>
                        <li class="dropdown-item" ><a class="lead" href="{% url 'account:logout' %}">خروج</a></li>
                    </ul>
                </div>
                <div class="right-nav-item">
                    <button class="ask btn" type="button">سوال بپرس</button>
                </div>
            </div>
        </nav>

        <div class="content-wrapper">
            {% block content %}
            {% endblock content %}
        </div>
        </div>
            <div class="ask-form hide screen-center">
                <div class="container">
                    <div class="row d-flex justify-content-center">
                        <div class="question-form col-md-8">
                            <form method="POST" action="{% url 'account:ask' %}">
                            {% csrf_token %}
                                <div class="inputs">
                                    <div class="asker">
                                    {{ user }} می پرسد :
                                    </div>
                                    <textarea  class="text" id="title" name="title" placeholder="سوال خود را با 'چگونه'، 'چه'، 'چرا' و غیره شروع کنید."></textarea>
                                </div>
                                <div class="buttons d-flex justify-content-end align-items-center">
                                    <a id="cancel" href="#">
                                    انصراف
                                    </a>
                                    <input class="submit_button" type="submit" value="ایجاد سوال">

                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        <div class="ask-answer-form hide screen-center">
                <div class="container">
                    <div class="row d-flex justify-content-center">
                        <div class="request-popup col-md-8">
                            <div class="title">
                                درخواست پاسخ
                            </div>
                            <div class="request-form row">
                                <div class="topics col-md-2">
                                    <label>موضوعات</label>
                                    <ul>
                                        <li class="topic-item selected">
                                            همه موضوعات
                                        </li>
                                        <li class="topic-item">
                                            کوئرا
                                        </li>
                                        <li class="topic-item">
                                            سال 2018
                                        </li>
                                    </ul>
                                </div>
                                <div class="users col-md-10">
                                    <label>کاربران با بیشترین پاسخ در موضوع</label>
                                    <ul>
                                        <li class="user-item">
                                            <div class="responder d-flex align-items-center">
                                                <div class="photo-wrapper">
{#                                              TODO#}
                                                    <a href="/profile/MahdiehBrf">
                                                        <img class="profile_photo_img" src="https://qsf.fs.quoracdn.net/-3-images.new_grid.profile_pic_default_small.png-26-679bc670f786484c.png" alt="MahdiehBrf" height="50" width="50">
                                                    </a>
                                                </div>
                                                <div class="info d-flex justify-content-between">
                                                    <div>
                                                        <span class="full-name">مهدیه بهروزی‌فر</span>
                                                        ،
                                                        <span class="creditional">دانشجوی ارشد مهندسی کامپیوتر دانشگاه صنعتی شریف</span>
                                                        <div class="request-reason">
                                                            21 پاسخ در این موضوع
                                                        </div>
                                                    </div>
                                                    <div class="request-icon">
                                                        <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                            <g class="icon_svg-stroke" stroke="#666" stroke-width="1.5" fill="none" fill-rule="evenodd">
                                                                <path d="M12,7 L12,17" stroke-linecap="round"></path>
                                                                <path d="M7,12 L17,12" stroke-linecap="round"></path>
                                                                <circle cx="12" cy="12" r="9"></circle>
                                                            </g>
                                                        </svg>
                                                    </div>
                                                </div>

                                            </div>
                                        </li>
                                        <li class="user-item">
                                            <div class="responder d-flex align-items-center">
                                                <div class="photo-wrapper">
{#                                              TODO#}
                                                    <a href="/profile/MahdiehBrf">
                                                        <img class="profile_photo_img" src="https://qsf.fs.quoracdn.net/-3-images.new_grid.profile_pic_default_small.png-26-679bc670f786484c.png" alt="MahdiehBrf" height="50" width="50">
                                                    </a>
                                                </div>
                                                <div class="info d-flex justify-content-between">
                                                    <div>
                                                        <span class="full-name">مهدیه بهروزی‌فر</span>
                                                        ،
                                                        <span class="creditional">دانشجوی ارشد مهندسی کامپیوتر دانشگاه صنعتی شریف</span>
                                                        <div class="request-reason">
                                                            21 پاسخ در این موضوع
                                                        </div>
                                                    </div>
                                                    <div class="request-icon">
                                                        <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                            <g class="icon_svg-stroke" stroke="#666" stroke-width="1.5" fill="none" fill-rule="evenodd">
                                                                <path d="M12,7 L12,17" stroke-linecap="round"></path>
                                                                <path d="M7,12 L17,12" stroke-linecap="round"></path>
                                                                <circle cx="12" cy="12" r="9"></circle>
                                                            </g>
                                                        </svg>
                                                    </div>
                                                </div>

                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <input id="request-done" class="submit_button" type="submit" value="انجام شد">

                        </div>
                    </div>
                </div>
            </div>



        <script>
        window.onload = function() {
          fetch_api_data();
        };

        $(".ask.btn").click(function (e) {
                var $formObj = $(".ask-form").removeClass('hide').addClass('show').find('form').attr('action', '{% url "account:ask"%}');
                $formObj.find('textarea').text('');
                $formObj.find('input')[1].value = 'ایجاد سوال';
                $('.overlay').css("opacity", "0.2").css("position","absolute");
                e.stopPropagation();
            });

        $(".question .qu.action-bar .action-item.request").click(function (e) {
                var $formObj = $(".ask-answer-form").removeClass('hide').addClass('show');
                $('.overlay').css("opacity", "0.2").css("position","absolute");
                e.stopPropagation();
            });

        $(".dropdown-menu").on('click', '.before-menu .read-all', function (e) {
            $.get("/notifs-readall/", {}, function(data) {
                $('.dropdown-menux .notifs').empty();
                $('.notifications .notifs .notif-item').addClass('read');
                $('.live_notify_badge')[0].innerHTML = '0';
            });

            e.stopPropagation();
        });

        $(document).on('click', '*', function (e) {
            e.stopPropagation();
            if ((!$(e.target).hasClass('read-all') && !$(e.target).closest('.ask-form').length && !$(e.target).closest('.ask-answer-form').length )|| ( (e.target.id === "cancel") || (e.target.id === "request-done"))) {
                $(".ask-form, .ask-answer-form").removeClass('show').addClass('hide');
                $('.overlay').css("opacity", "1").css("position","unset");
            }
        });
        var span = $('<span>').css('display','inline-block')
        .css('word-break','break-all').appendTo('body').css('visibility','hidden');
        function initSpan(textarea){
          span.text(textarea.text())
              .width(textarea.width())
              .css('font',textarea.css('font'));
        }
        $('textarea').on({
            input: function(){
              var text = $(this).val();
              span.text(text);
              $(this).height(text ? span.height() : '1.1em');
            },
            focus: function(){
             initSpan($(this));
            },
            keypress: function(e){
                if(e.which == 13) e.preventDefault();
            }
        });

    </script>
    {% else %}
        <a class="lead" href="{% url 'account:login' %}">Log in</a>
    {% endif %}


    </body>
</html>